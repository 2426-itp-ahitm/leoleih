<div class="reservation-container">
  <div class="reservation-layout">
    <!-- Left Side: Selection and Info -->
    <div class="selection-panel">
      <mat-card class="calendar-card">
        <mat-card-header>
          <mat-card-title style="color: white">Datum wählen</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-calendar [selected]="selectedDate" (selectedChange)="onDateChange($event)"></mat-calendar>
        </mat-card-content>
      </mat-card>

      <mat-card class="room-card">
        <mat-card-header>
          <mat-card-title style="color: white">Räume</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <mat-selection-list [multiple]="false">
            <mat-list-option *ngFor="let room of rooms" [selected]="currentRoom?.id === room.id" (click)="setRoom(room)">
              {{ room.name }}
            </mat-list-option>
          </mat-selection-list>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Right Side: Grid -->
    <div class="grid-panel">
      <mat-card class="grid-card">
        <mat-card-header>
          <mat-card-title style="color: white">{{ currentRoom?.name }} - Wochenansicht</mat-card-title>
          <mat-card-subtitle>{{ currentWeekStart | date:'dd.MM.yyyy' }} - {{ weekDays[4] | date:'dd.MM.yyyy' }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <div class="table-container">
            <table class="reservation-table">
              <thead>
                <tr>
                  <th>Zeit</th>
                  <th *ngFor="let day of weekDays">{{ day | date:'EEEE dd.MM' }}</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let time of times; let rowIndex = index">
                  <td class="time-col">{{ time }}</td>
                  <td
                    *ngFor="let day of weekDays; let colIndex = index"
                    (mousedown)="onMouseDown(rowIndex, colIndex, $event)"
                    (mousemove)="onMouseMove(rowIndex, colIndex)"
                    (mouseup)="onMouseUp($event)"
                    (click)="onCellClick(rowIndex, colIndex)"
                    [style.background-color]="getCellColor(rowIndex, colIndex)"
                    class="grid-cell">
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </mat-card-content>
        <mat-card-actions align="end">
          <button mat-raised-button color="primary" (click)="addReservation()">
            <mat-icon>add</mat-icon> Reservieren
          </button>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
</div>
